## 선착순 쿠폰 발급
sequenceDiagram
User->>+CouponController: [POST] /api/v1/coupons/{couponId}/issue<br>선착순 쿠폰 발급 요청
CouponController->>+CouponService: 쿠폰 발급
CouponService->>+CouponRepository: 잔여 쿠폰 수량 조회
CouponRepository-->>-CouponService: 잔여 쿠폰 수량 반환
alt 잔여 수량 == 0
CouponService-->>User: 쿠폰 발급 실패
else 잔여 수량 > 0
CouponService->>+UserCouponRepository: 쿠폰 발급 이력 조회
UserCouponRepository-->>-CouponService: 쿠폰 발급 이력 반환
alt 발급 이력 존재
CouponService-->>User: 쿠폰 발급 실패
else 발급 이력 없음
CouponService->>CouponRepository: 잔여 쿠폰 수량 차감
CouponService->>UserCouponRepository: 쿠폰 발급 이력 저장
CouponService-->>-CouponController: 발급된 쿠폰 정보 반환
CouponController-->>-User: 쿠폰 발급 결과 반환
end
end재